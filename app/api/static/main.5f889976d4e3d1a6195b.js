!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootSelector=t,this.visible=!1,this.button=document.getElementById("".concat(this.rootSelector,"-button")),this.modal=document.getElementById("".concat(this.rootSelector,"-modal"))}var t,n,r;return t=e,(n=[{key:"show",value:function(){this.modal.classList.add("visible"),this.visible=!0}},{key:"hide",value:function(){this.modal.classList.remove("visible"),this.visible=!1}},{key:"observe",value:function(){var e=this;document.addEventListener("click",(function(t){t.target===e.button&&e.visible?e.hide():t.target!==e.button||e.visible?e.modal.contains(t.target)||e.modal===t.target||e.hide():e.show()}))}}])&&o(t.prototype,n),r&&o(t,r),e}();function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}!function(){for(var e=0,t=Array.from(document.querySelectorAll(".modal"));e<t.length;e++){var n=t[e].id.split("-").shift();new r(n).observe()}var o=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formId=t,this.form=document.getElementById(this.formId),this.formButton=this.form.querySelector(".main__button"),this.formInput=this.form.querySelector(".main__url-input"),this.loaderState=!1,this.errorState=!1,this.responseState=!1,this.messageState=!1}var t,n,o;return t=e,(n=[{key:"el",value:function(e){return(new DOMParser).parseFromString(e,"text/html").body.firstChild}},{key:"displayLoader",value:function(){var e=this.el('<div class="loader" id="loader">\n                                <div class="loader__dot-container">\n                                    <div class="loader__dot"></div>\n                                    <div class="loader__dot"></div>\n                                    <div class="loader__dot"></div>\n                                </div>\n                            </div>');this.form.insertAdjacentElement("afterEnd",e),this.loaderState=!0}},{key:"removeLoader",value:function(){document.getElementById("loader").remove(),this.loaderState=!1}},{key:"displayMessage",value:function(){var e=this.el('<div id="message" class="main__message">Success! Click the shortened url to copy!</div>');this.form.insertAdjacentElement("afterEnd",e),this.messageState=!0}},{key:"removeMessage",value:function(){document.getElementById("message").remove(),this.messageState=!1}},{key:"displayError",value:function(e){var t=this,n='<div class="main__error" id="error">\n                                <p class="main__error__text">\n                                    '.concat(e,'\n                                </p>\n                                <button class="main__error__button"></button>\n                            </div>'),o=this.el(n);this.form.insertAdjacentElement("afterEnd",o),o.querySelector(".main__error__button").addEventListener("click",(function(e){t.removeError(),t.toggleButton(!0)})),this.errorState=!0}},{key:"removeError",value:function(){document.getElementById("error").remove(),this.errorState=!1}},{key:"displayResponse",value:function(e){var t=this,n='<div class="main__response" id="response">\n                                    <div class="main__response__url">\n                                        '.concat(e,"\n                                    </div>\n                                </div>"),o=this.el(n);this.form.insertAdjacentElement("afterEnd",o),document.getElementById("response").addEventListener("click",(function(n){var o=document.createElement("textarea");o.value=e,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o);var r=t.el('<div class="click-popup">Copied to clipboard!</div>');r.style.animation="fade-to-top ".concat(2,"s ease-out"),r.style.top=n.pageY,r.style.left=n.pageX,document.querySelector(".page").insertAdjacentElement("beforeEnd",r),setTimeout((function(){return r.remove()}),2e3)})),this.responseState=!0}},{key:"removeResponse",value:function(){document.getElementById("response").remove(),this.responseState=!1}},{key:"toggleInput",value:function(e){this.formInput.disabled=!e}},{key:"toggleButton",value:function(e){e?(this.formButton.disabled=!1,this.formButton.classList.add("active")):(this.formButton.disabled=!0,this.formButton.classList.remove("active"))}},{key:"click",value:function(){var e=this;this.formButton.addEventListener("click",(function(t){t.preventDefault();var n=e.formInput.value;e.responseState&&e.removeResponse(),e.errorState&&e.removeError(),e.messageState&&e.removeMessage(),e.validateUrl(n)?(e.toggleButton(!1),e.toggleInput(!1),e.displayLoader(),fetch(window.location.origin+"/api/urls/",{method:"post",body:JSON.stringify({long_url:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.removeLoader(),t.short_url?(e.displayMessage(),e.displayResponse(t.short_url)):e.displayError("Something went wrong, try again :("),e.toggleInput(!0),e.toggleButton(!0)})).catch((function(t){e.removeLoader(),e.displayError("Something went wrong, try again :("),e.toggleInput(!0),e.toggleButton(!0)}))):(e.toggleButton(!1),e.displayError("Please enter a valid url!"))}))}},{key:"input",value:function(){var e=this;this.formInput.addEventListener("input",(function(t){e.toggleButton(!0)}))}},{key:"validateUrl",value:function(e){return/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(e)}}])&&i(t.prototype,n),o&&i(t,o),e}())("main-form");o.click(),o.input()}()}]);